import {isMobile} from "./webcomponents/lib/device-helper.js";
import {ComponentNavigation} from "./lib/component-navigation.js";
import {DraftStore} from "./lib/draft-store.js";

export class App {

    constructor() {
        this.setAssistantMarginHandler = this.setAssistantMargin.bind(this);
        window.eventEmitter.on("assistant-toggled", this.setAssistantMarginHandler);

        if (isMobile()) {
            window.eventEmitter.emit("show-assistant");
        }
        else {
            window.eventEmitter.emit("hide-assistant");
        }
        
        // Application navigation
       new ComponentNavigation();
        
        window.draftStore = new DraftStore();

        //TODO JN: Move to boot-singletons and import into index.html
    }

    setAssistantMargin(params) {
        const main = document.querySelector(".main");
        if (params.isOpen == true) {
            main.classList.add("assistant-margin");
        }
        else {
            main.classList.remove("assistant-margin");
        }
    }
}

new App();