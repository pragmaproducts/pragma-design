export class BackBufferHelper {
    constructor() {
        this._canvas = document.createElement("canvas");
        this.measuredItems = {};
    }
    
    dispose() {
        this._canvas = null;
        this.measuredItems = null;
    }

    /**
     * Measure the length of text on back buffer, store and return.
     * @param text - text to be measured
     * @param padding - additional padding to apply
     * @returns {*}
     */
    measureText(text, padding = 10) {
        let width = this.measuredItems[text];

        if (width == null) {
            const context = this._canvas.getContext("2d");
            context.font = "16px appFont, sans-serif";
            width = context.measureText(text).width + padding;
            this.measuredItems[text] = width;
        }

        return width;
    }
}