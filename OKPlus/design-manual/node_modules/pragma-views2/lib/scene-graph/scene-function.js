import {SceneNode} from "./scene-node.js";

export class SceneFunction extends SceneNode {
    constructor(value, iconWidth, iconName) {
        super(value);
        this.parameters = {};
        this.iconWidth = iconWidth || 30;
        this.iconName = iconName || "#function";
        this.xOffset = this.iconWidth;
        this.expanded = false;
        return this;
    }

    dispose() {
        this.parameters = null;
        this.expanded = null;
        super.dispose();
    }

    addParameter(name, sceneGraph) {
        this.hasChildren = true;
        this.parameters[name] = sceneGraph;
        sceneGraph.parentId = this.id;
        return sceneGraph;
    }

    toString() {
        let body = [];
        
        const keys = Object.keys(this.parameters);
        for (let key of keys) {
            body.push(this.parameters[key].toString());
        }

        return `${this.value.toLowerCase()}(${body.join(",")})`;
    }
}