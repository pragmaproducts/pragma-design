import {DataSourceBase} from "./datasource-base.js";
import {ComponentUiStates} from "./component-ui-states.js";

export class ResourceDataSource extends DataSourceBase {

    constructor(options) {
        super(options);
    }

    async load(){
        return await super.load(this.definition.resource.slice(0));

        // const data = this.definition.resource.slice(0);
        // return await super.load(cloneObject());
    }

    componentStateChanged(componentsState) {
        // Prevent loading is used by lookup to prevent loading when component becomes active. The lookup triggers the load
        if(this.definition.preventLoading == null && componentsState === ComponentUiStates.active && this._data == null) {
            this.load();
        }
    }
}