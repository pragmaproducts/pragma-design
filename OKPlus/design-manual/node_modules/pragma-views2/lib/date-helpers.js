import {padStart} from "./string-helpers.js";

/**
 * Compares two dates and checks if they are the same day of the same month and year.
 * @param {Date} date1
 * @param {Date} date2
 * @returns {boolean}
 */
export function sameDay(date1, date2) {

    if (date1 == null || date2 == null) {
        return false;
    }
    return date1.getFullYear() === date2.getFullYear() &&
        date1.getMonth() === date2.getMonth() && date1.getDate() === date2.getDate();
}

/**
 * Compares two dates and checks if they are the same month and year.
 * @param {Date} date1
 * @param {Date} date2
 * @returns {boolean}
 */
export function sameMonth(date1, date2) {

    if (date1 == null || date2 == null) {
        return false;
    }
    if (!date1 instanceof Date || !date2 instanceof Date) {
        return false;
    }
    return date1.getFullYear() === date2.getFullYear() && date1.getMonth() === date2.getMonth();
}

/**
 * Formats the date component to an ISO string eg 2019-01-02
 * Returns null on invalid input.
 * @param {Date} date
 * @returns {Object}
 */
export function dateToIsoStringDate(date) {
    if (date == null || !date instanceof Date) {
        return null;
    }
    return `${date.getFullYear()}-${padStart(date.getMonth() + 1)}-${padStart(date.getDate())}`;
}

const dateHelpers = {
    sameDay,
    sameMonth,
    dateToIsoStringDate
};

export {dateHelpers};
