$switch-width: 3.5rem;
$switch-height: 2rem;
$switch-circle-width: 1.5rem;
$switch-circle-height: $switch-circle-width;
$switch-circle-side-margin: 0.25rem;
$switch-circle-top-margin: 0.25rem;
$switch-checked-x: $switch-width - $switch-circle-width - $switch-circle-side-margin;

input[type="checkbox"].switch {
  @include ignore-device-rendering();
  outline: none;
  display: block;
  width: $switch-width;
  height: $switch-height;
  position: relative;
  border: none;
  background-color: transparent;

  &:checked {
    background: transparent none;
  }
  &:hover {
    box-shadow: none;
  }

  /* Switch styling */

  &.switch {
    &:active {
      background-color: transparent;
    }
    &:active:before {
      border-color:var(--c-sc-unselected);
    }

    &:before {
      content: "";
      display: block;
      width: $switch-width;
      height: $switch-height;
      background-color: var(--c-switch-off-bg);
      border-radius: 1rem;
      border: $default-border-width-thin solid var(--c-sc-unselected);
      position: absolute;
      top: 0;
      left: 0;
      box-sizing: border-box;
      transition: transform 0.2s, background 0.2s ease-out;
    }

    &:after {
      content: "\2715";
      color: var(--c-sc-unselected);
      font-size: var(--font-size-small);
      display: block;
      width: $switch-circle-width;
      height: $switch-circle-height;
      background-color:var(--c-switch-off-bg);
      border-radius: 1rem;
      position: absolute;
      margin-left: $switch-circle-side-margin;
      margin-right: $switch-circle-side-margin;
      will-change: transform, background;
      transform: translateX(0);
      top: $switch-circle-top-margin;
      border: none;
      line-height: $switch-circle-height;
      text-align: center;
    }

    &:active:after {
      background-color:var(--c-switch-on-bg);
      box-shadow: 0 $default-border-width-thin $default-margin var(--c-shadow);
    }

    /* Checked styling */

    &:checked {
      &:active {
        background-color: transparent;
      }
      &:active:before {
        background-color:var(--c-sc-selected);
      }
      &:before {
        content: "";
        background-color: var(--c-sc-unselected);
        border-color:var(--c-border);
      }
      &:after {
        content: "\2713";
        will-change: transform;
        transform: translateX($switch-checked-x);
        margin: 0;
        padding: 0;
        color: var(--c-sc-unselected);
      }

      /* Checked hover state */

      &:hover:before {
        background-color:var(--c-sc-unselected);
        border-color:var(--c-sc-unselected)
      }
    }

    /* Hover state */
    &:hover:before {
      border-color:var(--c-hover)
    }

    &:hover:after {
      box-shadow: 0 $default-border-width $default-margin*2 var(--c-hover);
    }

    /* Disabled styling */

    &[disabled]:before,
    &[disabled]:checked:before {
      background-color:var(--c-sc-unselected);
      border-color: var(--c-sc-disabled);
    }
    &[disabled]:after {
      color: var(--c-sc-disabled);
    }

    /* Focus state */
    &:focus {
      box-shadow: none;
    }
    &:focus:before {
      box-shadow: 0 0 0 0.25rem var(--c-focus);
    }
  }
}
