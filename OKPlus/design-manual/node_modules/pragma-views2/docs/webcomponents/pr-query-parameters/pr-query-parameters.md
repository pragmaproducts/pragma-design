# Pragma Query Parameters

This document describes the required features for the pr-query-parameters component.

## Component

Name: pr-query-parameters

Component will be used to render a form with the parameterized queries for a given resource action.

## Design

[InVision - Parameterized Query Design](https://projects.invisionapp.com/d/main/default/#/console/16778341/348927797/preview)

## UI

Component will contain the following elements:
1. pragma-form

### Generation of schema

Schema for pragma-form will be generated from the resource actions api documentation, which will contain a list of
parameters. Each item in the list will provide details on the parameter, such as name, data type and default value. 

```
       "parameters": [
            {
                "name": "@test",
                "dataType": "boolean",
                "suppliedBy": "User",
                "defaultValue": true
            }
        ]
```

The onkey-bridge middleware will be used to inflate data source definition with parameter names and default values.

All input elements must be have the "required" attribute set, as every parameter value is compulsory.

## When to add component to DOM?

In data source setter on data-source-visualization-base, evaluate "requires-parameter-values"
property in schema, if true - load component.

## When is component removed from DOM?

Once user completes parameter values, component must be removed from all visualizations that share the data source.

## Focus Behaviour

1. Standard focus behaviour.

## Keyboard Behaviour

1. Standard input behaviour.

#### Comments

1. Users are not allowed to cancel this operation, parameter values must be supplied or no data will be returned. 

1. Should there be a data source definition property for "use-default-parameter-values". If all parameter default values are specified then
do not load the pr-query-parameters component and perform load operation with default values.

1. Not all users will have rights to view or edit resource criteria so the "Edit Query" button. Raise error specifying no rights.

1. How to cater for scenario where resource action criteria's parameter value is dependant on a selected value?
Use schema to specify where value originates from?

## Usage

The component is used in the pr-query-parameters template HTML markup. The following is a example of how it is used.

```html
<pr-query-parameters datasource.bind="someDataSource"></pr-query-parameters>
```