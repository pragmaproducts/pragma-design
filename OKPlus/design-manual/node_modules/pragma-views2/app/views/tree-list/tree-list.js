import {ViewBase} from "../../../baremetal/lib/view-base.js";
import {createDatasource, createRootItems, createChildItems} from "./data.js";

export default class TreeList extends ViewBase {
    async connectedCallback() {
        this.fetchDataHandler = this.fetchData.bind(this);
        this.datasource = createDatasource(this.fetchDataHandler);
        await this.datasource.load();
    }
    
    dispose() {
        this.fetchDataHandler = null;
    }
    
    async fetchData(definition, model, parentItem, inflatedParameters) {
        if (parentItem == null) {
            return createRootItems();
        }
        else {
            return createChildItems(parentItem);
        }
    }
}