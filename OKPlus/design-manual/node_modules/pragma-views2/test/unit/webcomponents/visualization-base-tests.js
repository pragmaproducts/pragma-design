import {VisualizationBase} from "./../../../webcomponents/lib/visualization-base.js";

describe("visualization-base-tests", () => {

    let instance;
    const sandbox = sinon.createSandbox();
    customElements.define('visualization-base', VisualizationBase);
    beforeEach(() => {
       
        instance =  new VisualizationBase();
        
        const workerMap = {
            worker: {
                postMessage: () => null
            }
        };
        
        instance.workers = new Map([["root", workerMap]]);
    });



    it('set property datasource - applySelection is not called when selectedId is null', () => {
        // Arrange
        let applySelectionSpy = sandbox.stub(instance, 'applySelection');

        instance.selectedId = null;
        const data = [{id: 1}];
        // Act
        instance.update(data);

        // Assert
        chai.assert.isNotNull(instance.selectedId);
        chai.assert(applySelectionSpy.notCalled, 'Expect the applySelection method not to be called of the visualization-base to be called when update is executed if selected id not null.');
    });
});
