export class IntDurationConverter {
    /**
     * Convert is used when requesting the value from the dataset.
     * This is often used when displaying the code in the UI.
     * The result format is hh:mm and will convert the numeric value to the string format
     * @param value: int value of the duration in minutes.
     * @returns {string} : "hh:mm"
     */
    convert(value) {
        if (value == null) {
            return "00:00";
        }
        
        const hours = Math.floor(value / 60);
        const hourText = hours < 10 ? `0${hours}` : hours;
        
        const min = value - (hours * 60);
        const minText = min < 10 ? `0${min}` : min;
        
        return `${hourText}:${minText}`;
    }

    /**
     * Convert back is used when setting the value.
     * Note setting the value can be done either through code or when the bound UI changes.
     * We thus support both the number and string value here.
     * If the value is a number we just pass it on unchanged.
     * If the value is in duration string format we convert it a number and then send that back.
     * @param value: int or "hh:mm" string
     * @returns: int
     */
    convertBack(value) {
        if ((value || "").length == 0) return null;
        
        if (typeof value == "string") {
            const stack = value.split(":");
            return Number(stack[0]) * 60 + Number(stack[1]);
        }
        
        return value;
    }
}