import {BaseElement} from "./../../baremetal/lib/base-element.js";
import {PragmaSchemaStructureProcessor} from "./pragma-schema-structure-processor.js";

export class PragmaSchemaStructure extends BaseElement {
    get schema() {
        return this._schema;
    }
    
    set schema(newValue) {
        this._schema = newValue;
        
        if (this._schema != null) {
            this.buildTreeFromSchema();
        }
    }
    
    connectedCallback() {
        super.connectedCallback();
        this.initTemplate();
    }

    disconnectedCallback() {
        super.disconnectedCallback();
    }

    initTemplate() {
        const instance = document.importNode(window.templates.get("pragma-schema-structure-template"), true);
        this.appendChild(instance);
    }

    buildTreeFromSchema() {
        const processor = new PragmaSchemaStructureProcessor();
        processor.process(this.schema);
    }
}

customElements.define('pragma-schema-structure', PragmaSchemaStructure);