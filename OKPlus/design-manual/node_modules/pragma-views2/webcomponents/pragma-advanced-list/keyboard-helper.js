import {KeyboardHelperBase} from "../lib/keyboard-helper-base.js";
import {ScrollDirection} from "../lib/scroll-direction.js";

export class KeyboardHelper extends KeyboardHelperBase {
    async ArrowLeft() {
        if (document.activeElement === this._target.backButton) {
            this._target.renderer.firstDataIndex = 0;
            const parentItem = this._target.parentItem;
            this._target.drillUp();
            this._target.focus.index = this._target.dataStore.data.indexOf(parentItem);
            await this._target.scrollAndFocus(ScrollDirection.Top, ScrollDirection.Left);
        } else {
            this._target.backButton.focus();
        }
    }

    async ArrowRight() {
        const dataItem = this._target.navigation.getDataStoreItemByIndex(this._target.focus.index);
        if (dataItem.hasChildren === true || dataItem.model.expandable === true) {
            await this._target.navigation.expand(this._target.focus.index);
            await this._target.scrolled();
            this._target.focus.index = 0;
            await this._target.scrollAndFocus(ScrollDirection.Bottom, ScrollDirection.Left);
        }
    }
}