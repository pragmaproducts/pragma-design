import {BaseElement} from "./../../baremetal/lib/base-element.js";

export class DataSourceVisualizationBase extends BaseElement {
    connectedCallback() {
        super.connectedCallback();
    }
    
    disconnectedCallback() {
        super.disconnectedCallback();
    }
    
    get datasource() {
        return this._datasource;
    }
    
    set datasource(value) {


        const requestQueryParameterValues = this.requiresParameterInput(this._datasource, value);
        
        this._datasource = value;
        
        if (requestQueryParameterValues === true) {
            this.requestParameterValues();
        }
    }

    /**
     * Returns a boolean value specifying if the data source requires parameter input before data is loaded
     * @param previous - previous data source instance
     * @param current - current data source instance
     * @returns {boolean}
     */
    requiresParameterInput(previous, current) {
        return current != null
            && previous != current
            && current.definition["use-default-parameter-values"] !== true
            && current.definition["requires-parameter-values"] === true;
    }
}