class PragmaPanelBar extends HTMLElement {
    constructor() {
        super();
    }

    _initTemplate() {
        const instance = document.importNode(window.templates.get("pragma-panel-bar-template"), true);
        this.body = this.querySelector("[slot='body']");
        this.attachShadow({mode: 'open'});
        this.shadowRoot.appendChild(instance);
    }

    get title() {
        return this._title || this.getAttribute("panel-title");
    }

    set title(newValue) {
        this._title = newValue;
        this._setTitle();
    }

    _setTitle() {
        const h2 = this.shadowRoot.querySelector("h2");
        h2.innerHTML = this.title;
    }

    connectedCallback() {
        this._initTemplate();
        this._setTitle();
    }

    disconnectedCallback() {
        this.body = null;
    }

    get uiGraph() {
        return this._uiGraph;
    }

    set uiGraph(newValue) {
        this._uiGraph = newValue;
    }

    get uiState() {
        return this._uiState;
    }

    set uiState(newValue) {
        this._uiState = newValue;
        if(this._uiGraph != null && this.path != null) {
            this._uiGraph.setChildrenStateForPath(this.path, newValue);
        }
    }

    get path() {
        return this._path;
    }

    set path(newValue) {
        this._path = newValue;
    }

}

customElements.define('pragma-panel-bar', PragmaPanelBar);